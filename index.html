<!DOCTYPE html>
<html lang="en">
  <head>
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <meta charset="UTF-8" />
    <title>Kennethtrancoding</title>
    <style>
      @font-face {
        font-family: "Gloock";
        src: url("../Gloock-Regular.ttf");
      }
      @font-face {
        font-family: "Inter";
        src: url("./Inter.ttf");
      }
      @font-face {
        font-family: "Lato";
        src: url("../Lato-Regular.ttf");
      }
      html,
      body {
        touch-action: none; /* Prevents pinch gestures */
        user-select: none; /* Prevents double-tap zoom */
        color: rgb(239, 239, 239);
        background-color: black;
        user-select: none;
        font-family: "Gloock";
        letter-spacing: 0.05em;
      }

      header {
        border-top: 2px solid gray;
        border-bottom: 2px solid gray;
        display: flex;
        flex-direction: row;
        justify-content: space-around;
        position: sticky;
        top: 2.5em;
        font-family: "SF";
      }
      #title-cont-cont {
        width: 100%;
        height: 100vh;
        display: flex;
        align-items: center;
        overflow: hidden;
        will-change: transform;
        will-change: text-shadow;
        will-change: font-size;
        will-change: line-height;
        border-bottom: 2px dashed gray;
      }
      #title-cont {
        width: 100%;
        display: flex;
        flex-direction: column;
      }
      #kenneth {
        text-align: right;
        margin-right: 10%;
      }
      #kenneth span {
        line-height: 0.5ch;
      }
      #kenneth span,
      #line-two span {
        display: inline-block;
        /*transition: text-shadow 0.05s, font-size 0.05s, line-height 0.05s;*/
        line-height: normal;
      }

      .main span p {
        padding-bottom: 10px;
        display: inline;
      }
      #line-two {
        margin-left: 10%;
        padding-top: 0;
        margin-top: 3px;
      }
      .main {
        font-family: "Gloock";
        font-size: clamp(120px, 12vw, 240px);
        text-shadow: -1px -1px 2px rgb(8, 244, 43), 4px 4px 1px gray;
      }

      #subtext {
        font-size: clamp(24px, 4vw, 80px);
        text-align: center;
        font-family: "SF";
        text-shadow: 2px 2px 1px gray;
      }
      #break {
        background-color: rgb(8, 244, 43);
      }
      #particles-js {
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        z-index: -1; /* Ensures it stays behind other content */
        background: black; /* Adjust if needed */
      }

      #scroll {
        width: 50px;
        height: 50px;
        background-color: inherit;
        border: none;
        display: flex;
        position: absolute;
        bottom: 30px;
        margin: 0px auto 0px;
      }
      #scroll svg {
        width: 50px;
        height: 50px;
        filter: drop-shadow(-1px -1px 1px rgb(8, 244, 43))
          drop-shadow(3px 3px 3px gray);
      }
      #my-projects {
        font-size: clamp(120px, 11vw, 240px);
      }
      /* Creating hexagon shape */
      #hexagon {
        position: absolute;
        width: 600px;
        height: 600px;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -61%);
        mix-blend-mode: difference;
        z-index: 1000;
        pointer-events: none;
        filter: drop-shadow(-1px -1px 1px rgb(8, 244, 43))
          drop-shadow(3px 3px 3px gray);
      }

      /* This content will be inside the hexagon */
    </style>
  </head>
  <body>
    <div id="particles-js"></div>
    <!--   <header>
      <a>About me</a>
      <a>Why I code</a>
      <a>Kennethtrancoding</a>
      <a>Settings</a>
    </header>-->
    <div id="title-cont-cont">
      <button id="scroll" onclick="scrollStart(window.innerHeight,700)">
        <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
          <circle cx="50" cy="50" r="50" fill="rgb(239, 239, 239)" />
        </svg>
      </button>

      <div id="title-cont">
        <!--  <span
          style="
            background-color: linear-gradient(
              rgb(0, 0, 0),
              rgba(0, 0, 0, 0),
              rgb(0, 0, 0)
            );
            position: absolute;
            width: 100vw;
            height: 100vw;
          "
        ></span>-->
        <div class="main" id="kenneth"><p>Kenneth</p></div>
        <span id="line-two-cont">
          <div class="main" id="line-two"><p>trancoding</p></div></span
        >
        <h2 id="subtext">Welcome to my website!</h2>
        <svg
          id="hexagon"
          version="1.1"
          xmlns="http://www.w3.org/2000/svg"
          width="600"
          height="520"
          viewbox="0 0 600 519.6152422706632"
        >
          <path
            fill="#EFEFEF"
            d="M0 259.8076211353316L150 0L450 0L600 259.8076211353316L450 519.6152422706632L150 519.6152422706632Z"
          ></path>
        </svg>
      </div>
    </div>
    <br class="break" />
    <span class="main" id="my-projects-cont">
      <div id="my-projects"><p>My Projects</p></div></span
    >
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/particles.js/1.0.0/particles.js"></script>
    <script>
      $("body").css({
        height: 2 * window.innerHeight + "px",
      });
      window.scrollTo(0, 1);
      document.addEventListener("gesturestart", function (e) {
        e.preventDefault();
      });

      function scrollStart(targetY, duration) {
        const startY = window.scrollY;
        const distance = targetY - startY;
        const startTime = performance.now();

        function scrollStep(currentTime) {
          const elapsedTime = currentTime - startTime;
          const progress = Math.min(elapsedTime / duration, 1); // Limit progress to 1
          const ease =
            progress < 0.5
              ? 2 * progress ** 2
              : 1 - Math.pow(-2 * progress + 2, 2) / 2; // Ease-in-out

          window.scrollTo(0, startY + distance * ease);

          if (progress < 1) {
            requestAnimationFrame(scrollStep);
          }
        }

        requestAnimationFrame(scrollStep);
      }

      // Disable zoom with touchmove
      document.addEventListener(
        "touchmove",
        function (e) {
          if (e.scale !== 1) {
            e.preventDefault();
          }
        },
        { passive: false }
      );
      //Variables
      const titleScrollThreshold = 30;
      const projectPageScrollThreshold = window.innerHeight - 30;

      let titleHoverAnimationEnabled = scrollY <= titleScrollThreshold;
      let projectPageHoverAnimationEnabled =
        scrollY >= projectPageScrollThreshold;
      let autoSpan = "";
      // Makes each character in Kennethtrancoding & My Projects an individual span

      for (let letter of $("#kenneth").text().split("")) {
        autoSpan += `<span data-original="${letter}"><p>${letter}</p></span>`;
      }
      $("#kenneth").html(autoSpan);
      $("#kenneth span").each(function () {
        $(this).attr("data-to-top", $(this).offset().top);
      }); //////
      autoSpan = "";

      for (let letter of $("#line-two").text().split("")) {
        autoSpan += `<span data-original="${letter}"><p>${letter}</p></span>`;
      }
      $("#line-two").html(autoSpan);

      $("#line-two span").each(function () {
        $(this).attr(
          "data-to-right",
          $(window).width() - $(this).offset().left
        );
      });
      //////
      autoSpan = "";

      for (let letter of $("#my-projects").text().split("")) {
        autoSpan += `<span data-original="${letter}"><p>${letter}</p></span>`;
      }
      $("#my-projects").html(autoSpan);

      $("#my-projects span").each(function () {
        $(this).attr(
          "data-to-right",
          $(window).width() - $(this).offset().left
        );
      });

      //Glitch characters, randint

      function randint(min, max) {
        return Math.floor(Math.random() * (max - min + 1)) + min;
      }
      const glitchCharacters = [
        "a",
        "b",
        "c",
        "d",
        "e",
        "f",
        "g",
        "h",
        "i",
        "j",
        "k",
        "l",
        "m",
        "n",
        "o",
        "p",
        "q",
        "r",
        "s",
        "t",
        "u",
        "v",
        "w",
        "x",
        "y",
        "z",
        "1",
        "2",
        "3",
        "4",
        "5",
        "6",
        "7",
        "8",
        "9",
        "0",
        "ð“…±",
      ];
      function glitch(item) {
        item.text(glitchCharacters[randint(0, glitchCharacters.length - 1)]);
      }
      //Mouse-over title
      let glitchInterval = null;
      function mouseOverEffect(selection) {
        const parent = selection.parent();
        const siblings = parent.children();
        const index = selection.index();

        selection.css({
          "text-shadow":
            "0px 0px 20px, -1px -1px 2px rgb(8, 244, 43), 4px 4px 1px gray, 0px -6px 15px black",
          "font-size": "clamp(150px, 20vw, 400px)",
          "line-height": "0.1ex",
        });

        if (index + 1 < siblings.length) {
          siblings.eq(index + 1).css({
            "text-shadow":
              "0px 0px 20px, -1px -1px 2px rgb(8, 244, 43), 4px 4px 1px gray, 0px -6px 15px black",
            "font-size": "clamp(120px, 16vw, 350px)",
            "line-height": "0.1ex",
          });
        }
        if (index - 1 >= 0) {
          siblings.eq(index - 1).css({
            "text-shadow":
              "0px 0px 20px, -1px -1px 2px rgb(8, 244, 43), 4px 4px 1px gray, 0px -6px 15px black",
            "font-size": "clamp(120px, 16vw, 350px)",
            "line-height": "0.1ex",
          });
        }

        // Clear any existing interval to prevent duplicates
        if (glitchInterval !== null) {
          clearInterval(glitchInterval);
        }

        // Start a new interval
        glitchInterval = setInterval(function () {
          glitch(selection);
        }, 50);
      }
      $("#kenneth span, #line-two span").on("mouseover", function () {
        if (titleHoverAnimationEnabled) {
          mouseOverEffect($(this));
        }
      });
      $("#my-projects span").on("mouseover", function () {
        if (projectPageHoverAnimationEnabled) {
          mouseOverEffect($(this));
        }
      });

      $("#kenneth span, #line-two span, #my-projects span").on(
        "mouseout",
        function () {
          // Clear interval when mouse leaves
          if (glitchInterval !== null) {
            clearInterval(glitchInterval);
            glitchInterval = null;
            $(this).text($(this).attr("data-original"));
          }
        }
      );

      $("#kenneth, #line-two, #my-projects").on("mouseout", function () {
        $(this)
          .children()
          .each(function () {
            $(this).css({
              "font-size": "",
              "text-shadow": "",
              "line-height": "normal",
              transform: "",
            });
            $(this).text($(this).attr("data-original"));
          });
      });

      titleHoverAnimationEnabled = true;
      $(window).on("scroll", function () {
        titleHoverAnimationEnabled = scrollY <= titleScrollThreshold;
        projectPageHoverAnimationEnabled =
          scrollY >= projectPageScrollThreshold;

        // Translate the elements based on scroll position
        $("#kenneth").css({
          transform:
            scrollY < titleScrollThreshold
              ? "translate(0, 0)"
              : "translate(-" + (scrollY - titleScrollThreshold) + "px, 0)",
        });
        $("#line-two").css({
          transform:
            scrollY < titleScrollThreshold
              ? "translate(0, 0)"
              : "translate(" + (scrollY - titleScrollThreshold) + "px, 0)",
        });

        const fadeStart = 200; // Start fading at 200px
        const fadeEnd = 500; // Fully faded at 500px

        // Opacity calculation
        $("#kenneth span, #line-two span, #hexagon, #subtext").each(
          function () {
            const originalTop = $(this).data("to-top");
            const currentTop = $(this)[0].getBoundingClientRect().top;
            const distanceMoved = currentTop - originalTop;

            const fadeStart = 200;
            const fadeEnd = 800;
            let opacity = 1;

            if (scrollY <= fadeStart) {
              opacity = 1; // Fully visible before fading starts
            } else if (scrollY >= fadeEnd) {
              opacity = 0; // Fully faded out
            } else {
              // Gradual fade formula
              opacity = Math.max(
                0,
                1 - (scrollY - fadeStart) / (fadeEnd - fadeStart)
              );
            }

            $(this).css({ opacity: opacity });
          }
        );

        $("#my-projects").each(function () {
          const originalTop = $(this).data("to-top");
          const currentTop = $(this)[0].getBoundingClientRect().top;
          const distanceMoved = currentTop - originalTop;

          // Set the start and end points for opacity transition
          const fadeStart = 0; // Start of the fade
          const fadeEnd = 350; // Point where opacity is 0%
          const fadeMax = 800; // Point where opacity is 100%

          let opacity = 0;

          // If scrollY is between fadeStart and fadeEnd, opacity should be 0
          if (scrollY < fadeEnd) {
            opacity = 0;
          }
          // Gradually increase opacity after fadeEnd until fadeMax
          else if (scrollY >= fadeEnd && scrollY <= fadeMax) {
            opacity = (scrollY - fadeEnd) / (fadeMax - fadeEnd); // Linear interpolation
          }
          // After fadeMax, the opacity remains at 100%
          else {
            opacity = 1;
          }

          $(this).css({ opacity: opacity });
        });
      });
    </script>
  </body>
</html>
